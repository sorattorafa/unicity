import React, {Component} from 'react';
import ReactDOM from "react-dom";
import { Form, Icon, Input, Button } from 'antd';
import "antd/dist/antd.css";
// import "./index.css";
import axios from 'axios';

function hasErrors(fieldsError) {
  return Object.keys(fieldsError).some(field => fieldsError[field]);
}

export default class CreateReport extends Component {

    constructor(props) {
        super(props); 
 
        this.onChangeCpf = this.onChangeCpf.bind(this);
        this.onChangeName = this.onChangeName.bind(this);  
        this.onChangeEmail = this.onChangeEmail.bind(this); 
        this.onChangePassword = this.onChangePassword.bind(this); 
        this.onSubmit = this.onSubmit.bind(this);

        this.usernameError = false;
        this.passwordError = false;

        this.state = { 
            cpf: '',
            name: '',
            email: '',  
            password: '', 
            active: true
        }
    }

//    componentWillMount() {  
//       axios.get('/categories')
//            .then(res => console.log(res.data));    
//  }

    onChangeCpf(e) {
        this.setState({
            cpf: e.target.value
        });
    } 

    onChangeName(e) {
        this.setState({
            name: e.target.value
        });
    }

    onChangeEmail(e) {
        this.setState({
            email: e.target.value
        });
    } 
 

    onChangePassword(e) {
        this.setState({
            password: e.target.value
        });
    }   


    onSubmit(e) {
        e.preventDefault();

        console.log(`Form submitted:`); 

        console.log(`User Cpf: ${this.state.cpf}`);
        console.log(`User Name: ${this.state.name}`);
        console.log(`User Email: ${this.state.email}`); 
        console.log(`User Password: ${this.state.password}`); 

        const newUser = { 
            cpf: this.state.cpf,
            name: this.state.name,
            email: this.state.email, 
            password: this.state.password,  
            // reports: this.state.reports, 
            // notifications: this.state.notifications, 
        }

        axios.post('/simpleusers/add', newUser)
            .then(res => console.log(res.data));

        this.setState({ 
            cpf:'',
            name: '',
            email: '', 
            password: '', 
            active: false
        })
    }

    render() {

      return (
          
          
        <Form layout="inline" onSubmit={this.handleSubmit}>
          <Form.Item validateStatus={this.usernameError ? 'error' : ''} help={this.usernameError || ''}>
            
              <Input
                prefix={<Icon type="user" style={{ color: 'rgba(0,0,0,.25)' }} />}
                placeholder="Username"
              />
          </Form.Item>
          <Form.Item validateStatus={this.passwordError ? 'error' : ''} help={this.passwordError || ''}>
            
              <Input
                prefix={<Icon type="lock" style={{ color: 'rgba(0,0,0,.25)' }} />}
                type="password"
                placeholder="Password"
              />
          </Form.Item>
          <Form.Item>
            <Button type="primary" htmlType="submit" disabled={hasErrors(this.passwordError && this.usernameError)}>
              Log in
            </Button>
          </Form.Item>
        </Form>
          


      )
    }
}
